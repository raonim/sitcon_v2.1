{% extends "base.html" %}

{% block title %}AMV {{ amv_id }} - {{ tipo }}{% endblock %}

{% block content %}
<div class="alert {{ 'alert-primary' if tipo == 'Comando' else 'alert-success' }}">
    <div class="d-flex justify-content-between align-items-center">
        <h2>AMV {{ amv_id }} - {{ tipo }}</h2>
        {% if coordenadas %}
            <button id="mostrar-mapa-btn" class="btn btn-info">
                <i class="bi bi-geo-alt-fill"></i> Ver no Mapa
            </button>
        {% endif %}
    </div>
</div>

{% if coordenadas %}
<div id="mapa-container" 
     class="mb-4" 
     style="height: 400px; display: none;"
     data-lat="{{ coordenadas.lat }}"
     data-lon="{{ coordenadas.lon }}">
</div>
{% endif %}


{% for registro in registros %}
<div class="card mb-4">
    <div class="card-header bg-{{ 'primary' if tipo == 'Comando' else 'success' }} text-white">
        Tipo Função: <strong>{{ registro['Tipo da Função'] }}</strong>
    </div>
    <div class="card-body">
        <table class="table">
            <tbody>
                {% for nome, valor in registro.items() %}
                    {% if nome != 'Tipo da Função' %}
                    <tr>
                        <td width="30%"><strong>{{ nome }}</strong></td>
                        <td>{{ valor }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endfor %}

<a href="{{ url_for('amv') }}" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Voltar</a>
{% endblock %}